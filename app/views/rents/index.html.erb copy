<div class="colmask threecol">
	<div class="colmid">
		<div class="colleft">
			<div class="col1">
				<!-- Column 1 start -->
                 Left Side
            

 			</div>
			<div class="col2">
			<div class="col3">
			column 3
				<!-- Column 3 start -->
				<!-- Column 3 end -->
			</div>
		</div>
	</div>
</div>

<div id="wrapper" class="clearfix">
  <div id="twocols"> 
    <div id="maincol">
	</div>
	<div id="rightcol">
	  <div class="padding">
			<form accept-charset="UTF-8" action="/rents/new" method="get" style="margin:0;padding:0;display:inline">
					<button  type="submit" style="float:left;"  >
		Add Rental
		</button>
		</form>
      </div>
      <div data-hook="homepage_map" style="padding-top:10px;">
        <div id="map_canvas" style="height:200px; width:200px;" />
      </div>
      <div class="demo" style="width:200px;" >
<p>

	<label for="price">price:</label>
	<input type="text" id="price" style="border:0; color:#f6931f; font-weight:bold;" />
</p>
        <div id="slider-price"></div>
      </div>
      <div class="demo" style="width:200px;" >
<p>
	<label for="distance">distance:</label>
	<input type="text" id="distance" style="border:0; color:#f6931f; font-weight:bold;" />
</p>
        <div id="slider-distance"></div>
      </div>
    </div>

  </div>	

	
</div>
      <p class="notice"><%= notice %></p>
      <p class="alert"><%= alert %></p>
<table>
 	  <% @items.each_with_index do |item, index | %>
<tr>
<td>

	  <%=  raw "<div id='homepage_item' onmouseover='selectMarker(#{index});'>" %>
	    <div id="item_search_result_picture">
	      <%= link_to image_tag(item.photos[0].image.thumb.url), rent_path(item) %>
	    </div>
	   	<div id="item_search_result_owner_picture">
	      <%= link_to image_tag(item.store.user.avatar.thumb.url), store_path(item.store) %>
	    </div>
	    <div id="item_search_result"> 
		  <div id="item_search_result_details" >
	   	    <div id="item_search_result_owner" >
              <div id="item_search_result_text"  >
	            <h2>  <%= link_to item.title , rent_path(item) %>  </h2>
	            <p>Location: <%= item.location %> <br/>
	            <% if !item.zipcode.nil? %>
                  Zip Code:  <%= item.zipcode.name %> <br/>
	            <% end %>
	   	        <p>Item.Reviews</br>
	            Item.Endorsements</p>
	          </div>
	        </div>
	      </div>
        </div>
      </div>  
 </td>
 </tr>
	  <% end %>
</table>



<div id="slider"></div>

	<style>
	#demo-frame > div.demo { padding: 10px !important;   };
	</style>

<style type="text/css">
div.padding {padding-bottom:1cm;}
div.padding2 {padding-top:50%;}
</style>


            </div>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=geometry&sensor=true"></script>

 
<script>(function($){
 $(document).ready(function(){

	// do stuff when div is ready
	var latlng = new google.maps.LatLng( 45.60, -122.60 );
	var myOptions = {
	  zoom: 8,
	  center: latlng,
	  disableDefaultUI: true,
	  mapTypeId: google.maps.MapTypeId.ROADMAP
	};
	mMap = new google.maps.Map(document.getElementById("map_canvas"),
	    myOptions);
	    
	    
	loadMarkers();
	    
    	     
		
 });
})(jQuery);

    
 <%=  raw " mItems = #{@items.to_json};" %> 

      var pinColor = "FE7569";
      var pinColorSelected = "00FE69";
      var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor,
         new google.maps.Size(21, 34),
         new google.maps.Point(0,0),
         new google.maps.Point(10, 34));
      var pinImageSelected = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColorSelected,
         new google.maps.Size(21, 34),
         new google.maps.Point(0,0),
         new google.maps.Point(10, 34));

    selectIndex = -1;
    
    function  getItemLatLon(i)
    {
       var r1 = Math.floor(Math.random()*100);
	   var lat = 45.60 + ( (r1-50) * 0.005);
	   var r2 = Math.floor(Math.random()*100);
	   var lon = -122.60 + ((r2-50) * 0.005); 
	   return myLatlng = new google.maps.LatLng( lat, lon); 
    }
	function markerClick( mark )
	{
	    for ( var m = 0; m < mMarkers.length; ++m )
	    {
	        if ( mMarkers[m] == mark ) 
	        {
	             selectMapItem(m);
	             return;
	        }
	    }
	}
	

  	function selectMarker(i)
  	{
  		
	   if ( selectIndex > -1 ) {
	     j = selectIndex;
	     mMarkers[j].setMap(null);
	     latlon = getItemLatLon(j);
  	     mMarkers[j] = new google.maps.Marker({
         	    position: latlon,
	            map: mMap,
	            title:'title',
	            icon: pinImage });
  	     mMarkers[j].setMap(mMap);   	   

	   }
       latlon = getItemLatLon(i);
  	   mMarkers[i].setMap(null);
  	   mMarkers[i] = new google.maps.Marker({
         	    position: latlon,
	            map: mMap,
	            title:'title',
	            icon: pinImageSelected });
  	   mMarkers[i].setMap(mMap);  
  	   google.maps.event.addListener(
	       mMarkers[i], 'click', function() { markerClick(this); });
	        	   
  	   selectIndex = i;
  	}
  	
	function loadMarkers() {
	
	  mMarkers = new Array();
	  var i = 0;
	   for ( item in mItems ) {
	    
         var r1 = Math.floor(Math.random()*100);
	       var lat = 45.60 + ( (r1-50) * 0.005);
	       var r2 = Math.floor(Math.random()*100);
	       var lon = -122.60 + ((r2-50) * 0.005); 
	       var myLatlng = new google.maps.LatLng( lat, lon); 
	 
        	mMarkers[i] = new google.maps.Marker({
         	    position: myLatlng,
	            map: mMap,
	            title:'title',
	            icon: pinImage });
          
	        mMarkers[i].setMap(mMap);
	        google.maps.event.addListener(
	        	   mMarkers[i], 'click', function() { markerClick(this); });
	        	   
		      i = i + 1;
	        
	  }
	

	
		
	}
	
</script>

	<script>
	$(function() {
		$( "#slider-price" ).slider({
			min: 5,
			step: 5,
			max: 150,
			values: [ 20, 50 ],
			slide: function( event, ui ) {
		         $( "#price" ).val( "$" + $( "#slider-price" ).slider( "values", 0 ) + " - $" + $( "#slider-price" ).slider( "values", 1 ) );

			}
		});
		$( "#price" ).val( "$" + $( "#slider-price" ).slider( "values", 0 ) + " - $" + $( "#slider-price" ).slider( "values", 1 ) );
	});
	$(function() {
		$( "#slider-distance" ).slider({
			min: 2,
			max: 100,
			values: [ 5 ],
			slide: function( event, ui ) {
				$( "#distance" ).val( ui.values[ 0 ] + " miles" );
			}
		});
		$( "#distance" ).val( $( "#slider-distance" ).slider( "values", 0 ) + " miles" );
	});
	</script>



   <style type="text/css">
    #slider { margin: 10px; }
</style>

